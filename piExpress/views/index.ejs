<!-- NO FUNCIONAN NI LAS FOTOS DE PERFIL NI LOS COMENTARIOS. ESTAN MAL LAS RELACIONES? LA INFO LLEGA, CUANDO HACEMOS CONSOLE LOG EN CONTROLADOR SE IMPRIME LA INFO, PERO NO FUNCIONA -->

<!DOCTYPE html>
<html lang="en">

<%-include("./partials/head")%>

<body>
    <%-include("./partials/header")%>
    <main>
        <section class="center main-content">
            <% for( let i = 0; i < posteos.length; i++) { %>    <!-- Recorre todos los posteos -->
                <article class="post">
                    <div class="info-usuario ">
                        <img src="<%= posteos[i].usuarios_id_posteo.foto_perfil %>" alt="foto de perfil"> 
                        <h4>
                            <a href="/users/detalleUsuario/<%= posteos[i].usuarios_id_posteo.id_usuario %>"><%= posteos[i].usuarios_id_posteo.nombre_usuario %></a> 
                        </h4>
                    </div>
                    <div class="post-body">
                        <a href="/users/detallePost/<%= posteos[i].id_posteo %>">   <!-- Insertamos el posteo en sí -->
                            <img src="<%= posteos[i].nombre_imagen %>" alt="">
                        </a>
                    </div>
                    <ul class="post-reacciones">
                        <li>
                            <i class="fa-regular fa-heart"></i>
                        </li>
                        <li>
                            <i class="fa-regular fa-comment"></i>
                        </li>
                    </ul>
                    <div class="post-comentarios">
                        <h4>Comentarios</h4>
                        <ul>
                            <% for( let j = 0; j < posteos[i].comentarios_id_posteo.length; j++ ) { %>     <!-- Recorre el array de comentario de posteo -->
                                <li>
                                    <a href="/users/detalleUsuario/<%= posteos[i].comentarios_id_posteo[j].usuarios_id_comentario.id_usuario%>"><%= posteos[i].comentarios_id_posteo[j].usuarios_id_comentario.nombre_usuario %></a>    <!-- Inserto el nombre del usuario que hizo el comentario -->
                                    <span><%= posteos[i].comentarios_id_posteo[j].texto_comentario %></span> <!-- Inserto el comentario en sí -->
                                </li>
                            <% } %>
                            <a href="/users/detallePost/<%= posteos[i].id_posteo %>">Ver más...</a>  <!-- Cuando presionamos ver mas nos lleva al id del posteo -->
                        </ul>
                    </div>
                </article>
            <% } %>
            
        </section>    
    </main>

    <%-include("./partials/footer")%>

</body>

</html>